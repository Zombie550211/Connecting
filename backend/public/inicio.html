<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
 <style>
    :root {
      --sidebar-bg: #15344a;
      --sidebar-accent: #22b3ec;
      --sidebar-hover: #1ea1d8;
      --sidebar-text: #222;
      --sidebar-radius: 14px;
      --azul-oscuro: #1e293b;
      --azul-acento: #22b3ec;
      --gris-bg: #f5f7fa;
      --gris-borde: #e3e8ee;
      --gris-titulo: #edf3fa;
      --azul-celda: #f1f5fa;
      --radius: 15px;
      --sombra: 0 4px 24px 0 rgba(30,41,59,0.09);
      --trans: 0.18s;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', 'Roboto', 'Montserrat', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: var(--gris-bg);
      color: var(--azul-oscuro);
    }
    .layout {
      display: flex;
      min-height: 100vh;
    }
    /* SIDEBAR - ESTILO REPORTS, NEGRITA */
    .sidebar {
      background: linear-gradient(180deg, #f7fafd 0%, #f4f7fb 100%);
      min-width: 180px;
      width: 180px;
      color: var(--sidebar-text);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 24px;
      height: 100vh;
      box-shadow: 0 6px 24px 0 rgba(30,41,59,0.10);
      font-weight: 700;
    }
    .sidebar-logo {
      width: 58px;
      height: 58px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      box-shadow: none;
      border-radius: 0;
    }
    .sidebar-logo img {
      width: 48px;
      height: 48px;
      display: block;
    }
    .sidebar-title {
      color: var(--sidebar-accent);
      font-size: 1.15em;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
      letter-spacing: .5px;
    }
    .sidebar-nav {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 13px;
      margin-bottom: 18px;
    }
    .sidebar-nav button {
      width: 95%;
      margin: 0 auto;
      padding: 12px 0;
      background: none;
      border: none;
      color: var(--sidebar-text);
      font-size: 1em;
      font-weight: 700;
      border-radius: 16px;
      text-align: left;
      padding-left: 18px;
      transition: background 0.15s, color 0.15s;
      letter-spacing: 0.02em;
    }
    .sidebar-nav button.active, .sidebar-nav button:hover {
      background: var(--sidebar-accent);
      color: var(--sidebar-text);
    }
    .sidebar-lema {
      color: var(--sidebar-accent);
      font-style: italic;
      font-size: 0.99em;
      opacity: 0.6;
      margin-top: auto;
      padding: 12px 10px 18px 10px;
      text-align: center;
      font-weight: 600;
    }

    /* MAIN CONTENT */
    .main-content {
      flex: 1;
      padding: 40px 50px;
      background: var(--gris-bg);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    /* LEAD FORM */
    .lead-content-row {
      display: flex;
      gap: 30px;
      width: 100%;
      align-items: flex-start;
    }
    .form-section {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 24px #0001;
      padding: 42px 38px 36px 38px;
      max-width: 480px;
      width: 100%;
      margin: 44px auto;
      flex: 1;
      align-self: flex-start;
      display: flex;
      flex-direction: column;
    }
    .form-section h2 {
      font-weight: 700;
      font-size: 2em;
      color: #183153;
      margin-bottom: 28px;
      margin-top: 0;
    }
    .form-group { margin-bottom: 18px;}
    .form-section label {
      color: #25a9dd;
      font-weight: 700;
      margin-bottom: 7px;
      display: block;
    }
    .form-section label[for="fecha-lead"] {
      color: #183153;
    }
    .form-section input, .form-section select {
      background: #f8fcff;
      border-radius: 7px;
      border: 1.5px solid #e4e6f1;
      padding: 13px 15px;
      font-size: 1.12em;
      width: 100%;
      margin-top: 2px;
    }
    .form-section button[type="submit"] {
      background: #25a9dd;
      color: #fff;
      border-radius: 9px;
      border: none;
      font-weight: 700;
      font-size: 1.18em;
      padding: 16px 0;
      width: 100%;
      margin-top: 9px;
      transition: background 0.2s;
    }
    .form-section button[type="submit"]:hover {
      background: #183153;
    }
    /* CHARTS SECTION */
    .charts-section {
      flex: 2;
      display: flex;
      flex-direction: column;
      gap: 22px;
      height: 100%;
      min-width: 0;
    }
    .charts-section .charts-filter { margin-bottom: 20px; padding: 10px 15px; background: #f3f7fa; border-radius: 8px; border: 1px solid #e2e8f0; display: flex; align-items: center; gap: 14px;}
    .charts-section .charts-filter label { font-weight: 600; margin-bottom: 0;}
    .charts-section .charts-filter input[type="date"] { padding: 7px 10px; border-radius: 6px; border: 1px solid #b4c5d4;}
    .charts-section .charts-filter button { width: auto; padding: 9px 20px; margin: 0; background: #2196f3; border: none; color: white; border-radius: 6px; font-weight: 700; cursor: pointer; transition: background-color 0.3s;}
    .charts-section .charts-filter button:hover { background: #126de4; }
    .chart-container { background: #fff; padding: 15px 20px; border: 1px solid #e2e8f0; border-radius: 10px; box-shadow: 0 2px 10px #0001; flex: 1; display: flex; flex-direction: column; justify-content: flex-end; min-height: 0; }
    .chart-container h3 { margin-top: 0; font-weight: 700; margin-bottom: 10px;}
    .chart-container {
      position: relative;
      width: 100%;
      min-height: 0;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }
    .chart-canvas {
      width: 100% !important;
      height: 100% !important;
      max-width: 100%;
      max-height: 100%;
      aspect-ratio: 16 / 5;
      display: block;
      background: transparent;
    }
    .no-data-msg { color: #d32f2f; font-weight: bold; text-align: center; margin-top: 10px;}
    @media (max-width: 1100px) {
      .charts-section .charts-filter, .form-section { padding: 12px 7vw; }
      .lead-content-row { flex-direction: column; gap: 13px; }
      .main-content { padding: 14px 2vw; }
    }
    @media (max-width: 700px) {
      .layout { flex-direction: column;}
      .sidebar { flex-direction: row; width: 100vw; min-height: 0; height: 70px; align-items: center; padding: 7px 0; }
      .sidebar-logo { margin: 0 12px 0 0; }
      .sidebar-title { font-size: 1em; margin-bottom: 0;}
      .sidebar-nav { flex-direction: row; gap: 0; }
      .sidebar-nav button { font-size: 1em; padding: 11px 6px; width: auto; border-radius: 7px; margin:0 3px; }
      .sidebar-lema { display: none;}
      .main-content { padding: 12px 2px; }
      .lead-content-row { flex-direction: column; gap: 7px;}
      .form-section { padding: 13px 7px;}
      .chart-container {padding: 7px 2vw;}
      .charts-section .charts-filter {padding: 7px 2vw;}
      .chart-canvas { aspect-ratio: 16/12; }
    }
  </style>
</head>
<body>
<div class="layout">
  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-logo">
      <img src="logo connecting.png" alt="Logo Connecting"/>
    </div>
    <div class="sidebar-title">Connecting</div>
    <div class="sidebar-nav">
      <button class="active" location.href='inicio.html'">Inicio</button>
      <button onclick="location.href='lead.html'">Lead</button>
      <button onclick="location.href='costumer.html'">Costumer</button>
      <button onclick="location.href='Facturacion.html'">Facturacion</button>
      <button onclick="logout()">Cerrar sesión</button>
    </div>
    <div class="sidebar-lema">
      "Conectando tu éxito, un cliente a la vez"
    </div>
  </nav>
    </aside>
    <!-- MAIN CONTENT -->
    <main class="main-content">
      <div class="dashboard-container">
        <!-- Panel bienvenida y rankings (idéntico a antes) -->
        <div class="panel-bienvenida-admin">
          <!-- SVG Astronauta -->
          <div style="width:100%;height:180px;overflow:hidden;border-radius:22px 22px 0 0;background: #209dd5;">
            <svg width="100%" height="180" viewBox="0 0 600 180" fill="none" xmlns="http://www.w3.org/2000/svg">
              <ellipse cx="150" cy="90" rx="120" ry="70" fill="#22b3ec" opacity="0.23"/>
              <ellipse cx="470" cy="110" rx="80" ry="50" fill="#fff" opacity="0.14"/>
              <ellipse cx="320" cy="70" rx="70" ry="40" fill="#fff" opacity="0.10"/>
              <circle cx="500" cy="60" r="32" fill="#22b3ec" opacity="0.13"/>
              <circle cx="90" cy="60" r="18" fill="#fff" opacity="0.10"/>
              <!-- Luna -->
              <circle cx="300" cy="120" r="44" fill="#F4F7FB" stroke="#b7d7ef" stroke-width="3" opacity="0.98"/>
              <ellipse cx="320" cy="135" rx="6" ry="3" fill="#d9eaff" opacity="0.35"/>
              <ellipse cx="292" cy="145" rx="4" ry="2" fill="#d9eaff" opacity="0.25"/>
              <!-- Astronauta -->
              <g>
                <rect x="288" y="95" width="24" height="32" rx="8" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <circle cx="300" cy="98" r="12" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <ellipse cx="300" cy="103" rx="6" ry="3" fill="#b7d7ef" opacity="0.25"/>
                <ellipse cx="303" cy="98" rx="5" ry="4" fill="#22b3ec" opacity="0.45"/>
                <rect x="282" y="105" width="8" height="24" rx="4" transform="rotate(-20 282 105)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="310" y="105" width="8" height="24" rx="4" transform="rotate(20 310 105)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="292" y="125" width="7" height="18" rx="3" transform="rotate(-8 292 125)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="301" y="128" width="7" height="18" rx="3" transform="rotate(8 301 128)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="292" y="109" width="16" height="11" rx="3" fill="#d9eaff" opacity="0.45"/>
                <rect x="318" y="116" width="2" height="20" fill="#209dd5"/>
                <rect x="320" y="116" width="14" height="9" fill="#22b3ec" stroke="#209dd5" stroke-width="1"/>
                <rect x="324" y="119" width="6" height="3" fill="#fff"/>
              </g>
            </svg>
          </div>
          <h2 id="saludo" style="margin-top:24px;margin-bottom:16px;font-weight:900; color:#209dd5; letter-spacing:-1px;"></h2>
          <div id="frase-inspiradora" style="font-size:1.13em;color:#1e293b;font-style:italic;margin-bottom:18px;"></div>
          <div class="valores-cultura" id="valores-cultura"></div>
          <div style="margin-top:16px;color:#b6c8d8;font-size:0.98em;font-style:italic;">
            Connecting CRM Administrativo
          </div>
        </div>
        <div class="rankings-wrapper">
          <div class="ranking-panel" id="ranking-equipos-panel">
            <h3>🏆 Ranking por Equipo</h3>
            <ol id="ranking-equipos-list"></ol>
          </div>
          <div class="ranking-panel" id="ranking-agentes-panel">
            <h3>🌟 Ranking por Agente</h3>
            <ol id="ranking-agentes-list"></ol>
          </div>
        </div>
      </div>
    </main>
  </div>
  <script>
    // Valores/cultura: puedes cambiarlos o traerlos de API si necesitas
    const valores = [
      { emoji: "🤝", valor: "Colaboración" },
      { emoji: "🏆", valor: "Excelencia" },
      { emoji: "💡", valor: "Innovación" }
    ];
    const frases = [
      "Liderar con integridad y visión: eso es Connecting.",
      "El éxito administrativo se construye con disciplina y pasión.",
      "Cada gestión es un paso hacia la excelencia.",
      "La confianza y la transparencia son nuestro mejor activo.",
      "¡Gracias por ser parte de nuestro crecimiento diario!",
      "El profesionalismo conecta sueños con resultados.",
      "Alcanzar la luna comienza con un primer paso, ¡gracias por darlo cada día!"
    ];

    // Saludo según hora del día
    function getSaludo(nombre) {
      const hora = new Date().getHours();
      let base = nombre ? `, ${nombre}` : "";
      if (hora < 12) return "¡Buenos días" + base + "!";
      if (hora < 19) return "¡Buenas tardes" + base + "!";
      return "¡Buenas noches" + base + "!";
    }
    function renderValores() {
      const cont = document.getElementById('valores-cultura');
      cont.innerHTML = valores.map(v =>
        `<div class="valor-card">
          <span style="font-size:1.4em;">${v.emoji}</span><br>
          <span style="color:#209dd5;font-weight:700;">${v.valor}</span>
        </div>`
      ).join('');
    }
    function renderRankingEquipos(equipos) {
      const ol = document.getElementById('ranking-equipos-list');
      ol.innerHTML = equipos.map((eq, idx) => `
        <li${idx>2?' class="opacity-low"':''}>
          <span style="font-size:1.3em;margin-right:9px;">${idx==0?'🥇':idx==1?'🥈':idx==2?'🥉':idx+1}</span>
          <span style="font-weight:700;">${eq.nombre}</span>
          <div style="flex:1;margin:0 8px;">
            <div style="height:8px;background:#e6f5fb;border-radius:4px;overflow:hidden;">
              <div style="width:${Math.min(100,eq.porc)}%;background:${idx==0?'#22b3ec':'#b6e0fb'};height:100%;border-radius:4px;"></div>
            </div>
          </div>
          <span style="font-weight:600;color:#209dd5;">${eq.ventas} ventas</span>
        </li>
      `).join('');
    }
    function renderRankingAgentes(agentes) {
      const ol = document.getElementById('ranking-agentes-list');
      ol.innerHTML = agentes.map((ag, idx) => `
        <li${idx>2?' class="opacity-low"':''}>
          <span style="font-size:1.3em;margin-right:9px;">${idx==0?'🥇':idx==1?'🥈':idx==2?'🥉':idx+1}</span>
          <img src="${ag.avatar}" alt="avatar" class="avatar${idx==1||idx==2?' secondary':''}${idx>2?' low':''}">
          <div style="flex:1;">
            <div style="font-weight:700;">${ag.nombre}</div>
            <div style="font-size:0.97em;color:#209dd5;">${ag.equipo}</div>
          </div>
          <span style="font-weight:600;color:#209dd5;">${ag.ventas} ventas</span>
        </li>
      `).join('');
    }
    async function cargarDashboard() {
      // Panel bienvenida (puedes cambiar por fetch('/api/welcome'))
      const bienvenida = await fetch('/api/welcome').then(r=>r.json())
        .catch(()=>({nombre:'Equipo administrativo'}));
      document.getElementById('saludo').textContent = getSaludo(bienvenida.nombre);
      document.getElementById('frase-inspiradora').textContent = frases[Math.floor(Math.random()*frases.length)];
      renderValores();
      // Ranking por equipos
      const equipos = await fetch('/api/ranking-equipos').then(r=>r.json())
        .catch(()=>[
          {nombre:"Team Pleitez", ventas:42, porc:85},
          {nombre:"Team Rivera", ventas:36, porc:72},
          {nombre:"Team Soto", ventas:30, porc:60},
          {nombre:"Team López", ventas:20, porc:40}
        ]);
      renderRankingEquipos(equipos);
      // Ranking por agentes
      const agentes = await fetch('/api/ranking-agentes').then(r=>r.json())
        .catch(()=>[
          {nombre:"Luis Pleitez", equipo:"Team Pleitez", ventas:23, avatar:"https://randomuser.me/api/portraits/men/32.jpg"},
          {nombre:"María Rivera", equipo:"Team Rivera", ventas:19, avatar:"https://randomuser.me/api/portraits/women/65.jpg"},
          {nombre:"Carlos Soto", equipo:"Team Soto", ventas:15, avatar:"https://randomuser.me/api/portraits/men/43.jpg"},
          {nombre:"Claudia López", equipo:"Team López", ventas:9, avatar:"https://randomuser.me/api/portraits/women/52.jpg"}
        ]);
      renderRankingAgentes(agentes);
    }
    cargarDashboard();
  </script>
</body>
</html>