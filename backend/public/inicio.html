<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --sidebar-bg: #15344a;
      --sidebar-accent: #22b3ec;
      --sidebar-hover: #1ea1d8;
      --sidebar-text: #222;
      --sidebar-radius: 14px;
      --azul-oscuro: #1e293b;
      --azul-acento: #22b3ec;
      --gris-bg: #f5f7fa;
      --gris-borde: #e3e8ee;
      --gris-titulo: #edf3fa;
      --azul-celda: #f1f5fa;
      --radius: 15px;
      --sombra: 0 4px 24px 0 rgba(30,41,59,0.09);
      --trans: 0.18s;
      --panel-bg: rgba(255,255,255,0.82);
      --panel-radius: 22px;
      --panel-shadow: 0 8px 32px rgba(30,41,59,0.15);
      --ver-todo: #22b3ec;
      --ver-todo-hover: #1ea1d8;
      --glass-blur: blur(6px);
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', 'Roboto', 'Montserrat', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: var(--gris-bg);
      color: var(--azul-oscuro);
    }
    .layout {
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      background: linear-gradient(180deg, #f7fafd 0%, #f4f7fb 100%);
      min-width: 180px;
      width: 180px;
      color: var(--sidebar-text);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 24px;
      height: 100vh;
      box-shadow: 0 6px 24px 0 rgba(30,41,59,0.10);
      font-weight: 700;
    }
    .sidebar-logo {
      width: 58px;
      height: 58px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      box-shadow: none;
      border-radius: 0;
    }
    .sidebar-logo img {
      width: 48px;
      height: 48px;
      display: block;
    }
    .sidebar-title {
      color: var(--sidebar-accent);
      font-size: 1.15em;
      font-weight: 700;
      text-align: center;
      margin-bottom: 24px;
      letter-spacing: .5px;
    }
    .sidebar-nav {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 13px;
      margin-bottom: 18px;
    }
    .sidebar-nav button {
      width: 95%;
      margin: 0 auto;
      padding: 12px 0;
      background: none;
      border: none;
      color: var(--sidebar-text);
      font-size: 1em;
      font-weight: 700;
      border-radius: 16px;
      text-align: left;
      padding-left: 18px;
      transition: background 0.15s, color 0.15s, box-shadow 0.18s;
      letter-spacing: 0.02em;
      box-shadow: none;
    }
    .sidebar-nav button.active, .sidebar-nav button:hover {
      background: var(--sidebar-accent);
      color: var(--sidebar-text);
      box-shadow: 0 2px 10px 0 #22b3ec55;
    }
    .sidebar-lema {
      color: var(--sidebar-accent);
      font-style: italic;
      font-size: 0.99em;
      opacity: 0.6;
      margin-top: auto;
      padding: 12px 10px 18px 10px;
      text-align: center;
      font-weight: 600;
    }

    .main-content {
      flex: 1;
      padding: 42px 0 36px 0;
      background: var(--gris-bg);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .dashboard-container {
      width: 100%;
      max-width: 1180px;
      margin: 0 auto;
      padding: 0 18px 24px 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 18px;
    }
    .panel-bienvenida-admin {
      background: var(--panel-bg);
      border-radius: var(--panel-radius);
      box-shadow: var(--panel-shadow);
      padding: 0 0 38px 0;
      text-align: center;
      position: relative;
      margin-bottom: 0;
      width: 100%;
      max-width: 990px;
      backdrop-filter: var(--glass-blur);
      border: 1.5px solid #e2eaf4;
      transition: box-shadow 0.17s;
    }
    .panel-bienvenida-admin:hover {
      box-shadow: 0 12px 48px #22b3ec1c;
    }
    .panel-bienvenida-admin .panel-header-img {
      width: 100%;
      height: 180px;
      overflow: hidden;
      border-radius: 22px 22px 0 0;
      background: linear-gradient(90deg,#22b3ec77 65%,#b7d7ef22 100%);
      position: relative;
    }
    .panel-bienvenida-admin h2 {
      margin-top: 32px;
      color: #22b3ec;
      font-weight: 900;
      font-size: 1.53em;
      letter-spacing: -1px;
      text-shadow: 0 1px 0 #fff, 0 2px 8px #22b3ec18;
    }
    .panel-bienvenida-admin .valores-cultura {
      display: flex;
      justify-content: center;
      gap: 28px;
      margin: 18px 0 10px 0;
      flex-wrap: wrap;
    }
    .valor-card {
      background: rgba(32,179,236,0.13);
      border-radius: 13px;
      padding: 17px 24px 16px 24px;
      box-shadow: 0 4px 18px #22b3ec18;
      min-width: 105px;
      text-align: center;
      border: 1.5px solid #d0eafd;
      transition: box-shadow 0.15s, border 0.13s;
      font-size: 1.08em;
    }
    .valor-card:hover {
      box-shadow: 0 6px 28px #22b3ec22;
      border: 1.5px solid #22b3ec;
    }
    .panel-bienvenida-admin .frase-inspiradora {
      font-size:1.17em;
      color:#1e293b;
      font-style:italic;
      margin-bottom:18px;
      margin-top: 8px;
      opacity: 0.95;
      text-shadow: 0 1px 0 #fff;
    }
    .panel-bienvenida-admin .panel-bajada {
      margin-top:18px;
      color:#b6c8d8;
      font-size:1em;
      font-style:italic;
      letter-spacing: 0.015em;
    }
    /* Filtros */
    .filtros-dashboard {
      width:100%;
      max-width:990px;
      display:flex;
      justify-content:flex-end;
      align-items:center;
      margin-bottom:8px;
      gap: 8px;
      font-size: 1.07em;
      font-weight: 600;
    }
    .filtros-dashboard label {
      font-weight:600;
      margin-right:4px;
    }
    .filtros-dashboard select {
      margin-right:12px;
      padding:4px 8px;
      border-radius:6px;
      border:1.2px solid #d0eafd;
      font-size: 1em;
      background: #fff;
      font-weight: 500;
      outline: none;
      transition: border 0.15s;
    }
    .filtros-dashboard select:focus {
      border: 1.2px solid var(--sidebar-accent);
    }
    .rankings-wrapper {
      display: flex;
      flex-direction: row;
      gap: 36px;
      justify-content: center;
      align-items: stretch;
      width: 100%;
      max-width: 990px;
    }
    .ranking-panel {
      flex: 1 1 0px;
      min-width: 270px;
      max-width: 332px;
      background: var(--panel-bg);
      border-radius: 18px;
      box-shadow: 0 6px 32px #22b3ec1c;
      padding: 32px 20px 38px 28px;
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      position: relative;
      min-height: 258px;
      border: 1.2px solid #e2eaf4;
      transition: box-shadow 0.14s;
      backdrop-filter: blur(3.5px);
    }
    .ranking-panel:hover {
      box-shadow: 0 10px 36px #22b3ec2c;
      z-index: 1;
      border: 1.2px solid #22b3ec;
    }
    .ranking-panel h3 {
      color: #22b3ec;
      margin-top: 0;
      margin-bottom: 18px;
      font-weight: 800;
      letter-spacing: -0.5px;
      font-size: 1.16em;
      text-shadow: 0 1px 0 #fff;
    }
    .ranking-panel ol {
      padding-left: 0;
      list-style: none;
      margin: 0;
      width: 100%;
    }
    .ranking-panel li {
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.04em;
      border-radius: 7px;
      padding: 4px 6px 4px 2px;
      transition: background 0.14s;
    }
    .ranking-panel li:hover {
      background: #f1fafe;
    }
    .ranking-panel li.opacity-low { opacity: 0.75; }
    .ver-todo-link {
      position: absolute;
      bottom: 14px;
      right: 22px;
      color: var(--ver-todo);
      font-weight: 600;
      font-size: 1em;
      cursor: pointer;
      border: none;
      background: none;
      outline: none;
      transition: color 0.15s;
      letter-spacing: 0.01em;
    }
    .ver-todo-link:hover {
      color: var(--ver-todo-hover);
      text-decoration: underline;
    }
    /* MODAL */
    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(30,41,59,0.18);
      z-index: 99;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: modal-fade-in 0.18s;
      backdrop-filter: blur(2.5px);
    }
    @keyframes modal-fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .modal-content {
      background: rgba(255,255,255,0.98);
      border-radius: 18px;
      box-shadow: 0 8px 52px #22b3ec19;
      padding: 40px 28px 28px 28px;
      max-width: 430px;
      width: 94vw;
      max-height: 82vh;
      overflow-y: auto;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      border: 2px solid #e2eaf4;
      backdrop-filter: blur(6px);
      transition: box-shadow 0.15s;
    }
    .modal-content h3 {
      margin-top: 0;
      font-size: 1.25em;
      color: #22b3ec;
      margin-bottom: 18px;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    .modal-content ol {
      padding-left: 0;
      list-style: none;
      margin: 0;
      width: 100%;
    }
    .modal-content li {
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.04em;
    }
    .modal-close {
      position: absolute;
      top: 12px;
      right: 16px;
      background: none;
      border: none;
      font-size: 1.7em;
      color: #15344a;
      cursor: pointer;
      font-weight: bold;
      opacity: 0.7;
      transition: opacity 0.13s;
    }
    .modal-close:hover {
      opacity: 1;
    }
    @media (max-width: 1100px) {
      .dashboard-container, .rankings-wrapper, .panel-bienvenida-admin { max-width: 99vw; }
      .rankings-wrapper { gap: 18px;}
      .ranking-panel { min-width: 190px; max-width: 330px; }
    }
    @media (max-width: 900px) {
      .rankings-wrapper { gap: 10px;}
      .ranking-panel { min-width: 150px; max-width: 98vw;}
    }
    @media (max-width: 850px) {
      .rankings-wrapper { flex-direction: column; gap: 18px;}
      .ranking-panel { width: 100%; max-width: 99vw; min-width: unset; min-height: 0;}
    }
    @media (max-width: 700px) {
      .layout { flex-direction: column;}
      .sidebar { flex-direction: row; width: 100vw; min-height: 0; height: 70px; align-items: center; padding: 7px 0; }
      .sidebar-logo { margin: 0 12px 0 0; }
      .sidebar-title { font-size: 1em; margin-bottom: 0;}
      .sidebar-nav { flex-direction: row; gap: 0; }
      .sidebar-nav button { font-size: 1em; padding: 11px 6px; width: auto; border-radius: 7px; margin:0 3px; }
      .sidebar-lema { display: none;}
      .main-content { padding: 12px 2px; }
      .dashboard-container { padding: 0 2vw;}
      .panel-bienvenida-admin { padding-bottom: 18px; }
      .panel-bienvenida-admin .valores-cultura { flex-direction: column; gap: 7px; }
      .ranking-panel { padding: 15px 5px 16px 5px; font-size: 0.98em; }
      .ranking-panel h3 { font-size: 1em; }
      .ranking-panel li { font-size: 0.98em; }
      .modal-content { padding: 16px 4vw 12px 4vw; max-width: 98vw;}
      .filtros-dashboard { flex-direction: column; align-items: flex-start; gap: 4px; }
    }
  </style>
</head>
<body>
<div class="layout">
  <!-- SIDEBAR -->
  <nav class="sidebar">
    <div class="sidebar-logo">
      <img src="logo connecting.png" alt="Logo Connecting"/>
    </div>
    <div class="sidebar-title">Connecting</div>
    <div class="sidebar-nav">
      <button class="active" onclick="location.href='inicio.html'">Inicio</button>
      <button onclick="location.href='lead.html'">Lead</button>
      <button onclick="location.href='costumer.html'">Costumer</button>
      <button onclick="location.href='Facturacion.html'">Facturacion</button>
      <button onclick="logout()">Cerrar sesión</button>
    </div>
    <div class="sidebar-lema">
      "Conectando tu éxito, un cliente a la vez"
    </div>
  </nav>
    <!-- MAIN CONTENT -->
    <main class="main-content">
      <div class="dashboard-container">
        <!-- Panel bienvenida y rankings -->
        <div class="panel-bienvenida-admin">
          <div class="panel-header-img">
            <svg width="100%" height="180" viewBox="0 0 600 180" fill="none" xmlns="http://www.w3.org/2000/svg">
              <ellipse cx="150" cy="90" rx="120" ry="70" fill="#22b3ec" opacity="0.23"/>
              <ellipse cx="470" cy="110" rx="80" ry="50" fill="#fff" opacity="0.14"/>
              <ellipse cx="320" cy="70" rx="70" ry="40" fill="#fff" opacity="0.10"/>
              <circle cx="500" cy="60" r="32" fill="#22b3ec" opacity="0.13"/>
              <circle cx="90" cy="60" r="18" fill="#fff" opacity="0.10"/>
              <!-- Luna -->
              <circle cx="300" cy="120" r="44" fill="#F4F7FB" stroke="#b7d7ef" stroke-width="3" opacity="0.98"/>
              <ellipse cx="320" cy="135" rx="6" ry="3" fill="#d9eaff" opacity="0.35"/>
              <ellipse cx="292" cy="145" rx="4" ry="2" fill="#d9eaff" opacity="0.25"/>
              <!-- Astronauta -->
              <g>
                <rect x="288" y="95" width="24" height="32" rx="8" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <circle cx="300" cy="98" r="12" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <ellipse cx="300" cy="103" rx="6" ry="3" fill="#b7d7ef" opacity="0.25"/>
                <ellipse cx="303" cy="98" rx="5" ry="4" fill="#22b3ec" opacity="0.45"/>
                <rect x="282" y="105" width="8" height="24" rx="4" transform="rotate(-20 282 105)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="310" y="105" width="8" height="24" rx="4" transform="rotate(20 310 105)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="292" y="125" width="7" height="18" rx="3" transform="rotate(-8 292 125)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="301" y="128" width="7" height="18" rx="3" transform="rotate(8 301 128)" fill="#fff" stroke="#209dd5" stroke-width="2"/>
                <rect x="292" y="109" width="16" height="11" rx="3" fill="#d9eaff" opacity="0.45"/>
                <rect x="318" y="116" width="2" height="20" fill="#209dd5"/>
                <rect x="320" y="116" width="14" height="9" fill="#22b3ec" stroke="#209dd5" stroke-width="1"/>
                <rect x="324" y="119" width="6" height="3" fill="#fff"/>
              </g>
            </svg>
          </div>
          <h2 id="saludo"></h2>
          <div id="frase-inspiradora" class="frase-inspiradora"></div>
          <div class="valores-cultura" id="valores-cultura"></div>
          <div class="panel-bajada">
            Connecting CRM Administrativo
          </div>
        </div>
        <!-- Filtro de mes/año -->
        <div class="filtros-dashboard">
          <label>Mes:</label>
          <select id="mes-select">
            <option value="0">Enero</option>
            <option value="1">Febrero</option>
            <option value="2">Marzo</option>
            <option value="3">Abril</option>
            <option value="4">Mayo</option>
            <option value="5">Junio</option>
            <option value="6">Julio</option>
            <option value="7">Agosto</option>
            <option value="8">Septiembre</option>
            <option value="9">Octubre</option>
            <option value="10">Noviembre</option>
            <option value="11">Diciembre</option>
          </select>
          <label>Año:</label>
          <select id="anio-select"></select>
        </div>
        <div class="rankings-wrapper">
          <div class="ranking-panel" id="ranking-equipos-panel">
            <h3>🏆 Ranking por Equipo</h3>
            <ol id="ranking-equipos-list"></ol>
            <button class="ver-todo-link" onclick="abrirModal('equipos')">Ver todo</button>
          </div>
          <div class="ranking-panel" id="ranking-agentes-panel">
            <h3>🌟 Ranking por Agente</h3>
            <ol id="ranking-agentes-list"></ol>
            <button class="ver-todo-link" onclick="abrirModal('agentes')">Ver todo</button>
          </div>
          <div class="ranking-panel" id="ranking-puntos-panel">
            <h3>⭐ Ranking por Puntos</h3>
            <ol id="ranking-puntos-list"></ol>
            <button class="ver-todo-link" onclick="abrirModal('puntos')">Ver todo</button>
          </div>
        </div>
      </div>
      <!-- MODAL -->
      <div id="modal-overlay" class="modal-overlay" style="display:none;">
        <div class="modal-content">
          <button class="modal-close" onclick="cerrarModal()" title="Cerrar">×</button>
          <h3 id="modal-title"></h3>
          <ol id="modal-list"></ol>
        </div>
      </div>
    </main>
  </div>
  <script>
    const valores = [
      { emoji: "🤝", valor: "Colaboración" },
      { emoji: "🏆", valor: "Excelencia" },
      { emoji: "💡", valor: "Innovación" }
    ];
    const frases = [
      "Liderar con integridad y visión: eso es Connecting.",
      "El éxito administrativo se construye con disciplina y pasión.",
      "Cada gestión es un paso hacia la excelencia.",
      "La confianza y la transparencia son nuestro mejor activo.",
      "¡Gracias por ser parte de nuestro crecimiento diario!",
      "El profesionalismo conecta sueños con resultados.",
      "Alcanzar la luna comienza con un primer paso, ¡gracias por darlo cada día!"
    ];

    function getSaludo(nombre) {
      const hora = new Date().getHours();
      let base = nombre ? `, ${nombre}` : "";
      if (hora < 12) return "¡Buenos días" + base + "!";
      if (hora < 19) return "¡Buenas tardes" + base + "!";
      return "¡Buenas noches" + base + "!";
    }
    function renderValores() {
      const cont = document.getElementById('valores-cultura');
      cont.innerHTML = valores.map(v =>
        `<div class="valor-card">
          <span style="font-size:1.4em;">${v.emoji}</span><br>
          <span style="color:#209dd5;font-weight:700;">${v.valor}</span>
        </div>`
      ).join('');
    }
    function renderRankingEquipos(equipos, mostrarTodos) {
      const ol = document.getElementById(mostrarTodos ? 'modal-list' : 'ranking-equipos-list');
      const cantidad = mostrarTodos ? equipos.length : Math.min(4, equipos.length);
      ol.innerHTML = equipos.slice(0, cantidad).map((eq, idx) => `
        <li>
          <span style="font-size:1.3em;margin-right:8px;">${idx==0?'🥇':idx==1?'🥈':idx==2?'🥉':idx+1}</span>
          <span style="font-weight:700;">${eq.nombre}</span>
          <div style="flex:1;margin:0 7px;">
            <div style="height:8px;background:#e6f5fb;border-radius:4px;overflow:hidden;">
              <div style="width:${Math.min(100,eq.porc)}%;background:${idx==0?'#22b3ec':'#b6e0fb'};height:100%;border-radius:4px;"></div>
            </div>
          </div>
          <span style="font-weight:600;color:#209dd5;">${eq.ventas} ventas</span>
        </li>
      `).join('');
    }
    function renderRankingAgentes(agentes, mostrarTodos) {
      const ol = document.getElementById(mostrarTodos ? 'modal-list' : 'ranking-agentes-list');
      const cantidad = mostrarTodos ? agentes.length : Math.min(4, agentes.length);
      ol.innerHTML = agentes.slice(0, cantidad).map((ag, idx) => `
        <li>
          <span style="font-size:1.3em;margin-right:8px;">
            ${idx==0?'🥇':idx==1?'🥈':idx==2?'🥉':idx+1}
          </span>
          <div style="flex:1;">
            <div style="font-weight:700;">${ag.nombre}</div>
            <div style="font-size:0.97em;color:#209dd5;">${ag.equipo}</div>
          </div>
          <span style="font-weight:600;color:#209dd5;">${ag.ventas} ventas</span>
        </li>
      `).join('');
    }
    function renderRankingPuntos(puntos, mostrarTodos) {
      const ol = document.getElementById(mostrarTodos ? 'modal-list' : 'ranking-puntos-list');
      const cantidad = mostrarTodos ? puntos.length : Math.min(4, puntos.length);
      ol.innerHTML = puntos.slice(0, cantidad).map((p, idx) => `
        <li>
          <span style="font-size:1.3em;margin-right:8px;">
            ${idx==0?'🥇':idx==1?'🥈':idx==2?'🥉':idx+1}
          </span>
          <div style="flex:1;">
            <div style="font-weight:700;">${p.nombre}</div>
            <div style="font-size:0.97em;color:#209dd5;">${p.equipo}</div>
          </div>
          <span style="font-weight:600;color:#209dd5;">${p.puntos} pts</span>
        </li>
      `).join('');
    }

    // MODAL LÓGICA
    let currentModal = null;
    function abrirModal(tipo) {
      currentModal = tipo;
      document.getElementById('modal-overlay').style.display = "flex";
      if (tipo === "equipos") {
        document.getElementById('modal-title').textContent = "Ranking completo por Equipo";
        renderRankingEquipos(window.equiposRanking, true);
      } else if (tipo === "agentes") {
        document.getElementById('modal-title').textContent = "Ranking completo por Agente";
        renderRankingAgentes(window.agentesRanking, true);
      } else if (tipo === "puntos") {
        document.getElementById('modal-title').textContent = "Ranking completo por Puntos";
        renderRankingPuntos(window.puntosRanking, true);
      }
    }
    function cerrarModal() {
      document.getElementById('modal-overlay').style.display = "none";
      currentModal = null;
    }

    // Filtros de mes/año
    const hoy = new Date();
    const mesSelect = document.getElementById('mes-select');
    const anioSelect = document.getElementById('anio-select');
    for(let y = hoy.getFullYear()-2; y <= hoy.getFullYear()+1; y++) {
      let opt = document.createElement('option');
      opt.value = y;
      opt.textContent = y;
      anioSelect.appendChild(opt);
    }
    mesSelect.value = hoy.getMonth();
    anioSelect.value = hoy.getFullYear();

    async function cargarDashboard(mes, anio) {
      const bienvenida = await fetch('/api/welcome').then(r=>r.json())
        .catch(()=>({nombre:'Equipo administrativo'}));
      document.getElementById('saludo').textContent = getSaludo(bienvenida.nombre);
      document.getElementById('frase-inspiradora').textContent = frases[Math.floor(Math.random()*frases.length)];
      renderValores();

      // Pasa mes y año como query params a la API si tu backend lo soporta
                  const equiposResponse = await fetch(`/api/rankings/equipos?mes=${mes}&anio=${anio}`, { credentials: 'include' }).then(r=>r.json()).catch(()=>({data:[]}));
      window.equiposRanking = equiposResponse.data;
      renderRankingEquipos(window.equiposRanking, false);
                  const agentesResponse = await fetch(`/api/rankings/agentes?mes=${mes}&anio=${anio}`, { credentials: 'include' }).then(r=>r.json()).catch(()=>({data:[]}));
      window.agentesRanking = agentesResponse.data;
      renderRankingAgentes(window.agentesRanking, false);
                  const puntosResponse = await fetch(`/api/rankings/puntos?mes=${mes}&anio=${anio}`, { credentials: 'include' }).then(r=>r.json()).catch(()=>({data:[]}));
      window.puntosRanking = puntosResponse.data;
      renderRankingPuntos(window.puntosRanking, false);
    }

    mesSelect.addEventListener('change', ()=>cargarDashboard(mesSelect.value, anioSelect.value));
    anioSelect.addEventListener('change', ()=>cargarDashboard(mesSelect.value, anioSelect.value));

    // Primer carga con el mes actual
    cargarDashboard(mesSelect.value, anioSelect.value);

    function logout() {
      window.location.href = 'logout';
    }
    document.addEventListener('keydown', function(e){
      if (e.key === "Escape") cerrarModal();
    });
    document.getElementById('modal-overlay').addEventListener('click', function(e){
      if (e.target === this) cerrarModal();
    });
  </script>
</body>
</html>